(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(e,n,a){},O8px:function(e,n,a){var t=a("mp5j");e.exports=(t.default||t).template({1:function(e,n,a,t,l){var i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\r\n                    <span class="modal-info-genres-text-list-data">'+e.escapeExpression(e.lambda(null!=n?i(n,"name"):n,n))+"</span>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,n,a,t,l){var i,o,r=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,d="function",c=e.escapeExpression,m=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="modal">\r\n    <div class="modal-container">\r\n        <img class="modal-image" src="https://image.tmdb.org/t/p/w500'+c(typeof(o=null!=(o=m(a,"poster_path")||(null!=n?m(n,"poster_path"):n))?o:s)===d?o.call(r,{name:"poster_path",hash:{},data:l,loc:{start:{line:3,column:69},end:{line:3,column:84}}}):o)+'" alt="'+c(typeof(o=null!=(o=m(a,"title")||(null!=n?m(n,"title"):n))?o:s)===d?o.call(r,{name:"title",hash:{},data:l,loc:{start:{line:3,column:91},end:{line:3,column:100}}}):o)+'" />\r\n\r\n        <div class="modal-info">\r\n            <h2 class="modal-info-title">'+c(typeof(o=null!=(o=m(a,"title")||(null!=n?m(n,"title"):n))?o:s)===d?o.call(r,{name:"title",hash:{},data:l,loc:{start:{line:6,column:41},end:{line:6,column:50}}}):o)+'</h2>\r\n            <p class="modal-info-vote card-text">\r\n                Vote / Votes<span class="modal-info-vote-average">'+c(typeof(o=null!=(o=m(a,"vote_average")||(null!=n?m(n,"vote_average"):n))?o:s)===d?o.call(r,{name:"vote_average",hash:{},data:l,loc:{start:{line:8,column:66},end:{line:8,column:82}}}):o)+'</span>/<span\r\n                    class="modal-info-vote-count">'+c(typeof(o=null!=(o=m(a,"vote_count")||(null!=n?m(n,"vote_count"):n))?o:s)===d?o.call(r,{name:"vote_count",hash:{},data:l,loc:{start:{line:9,column:50},end:{line:9,column:64}}}):o)+'</span>\r\n            </p>\r\n            <p class="modal-info-popularity card-text">\r\n                Popularity<span class="modal-info-popularity-data">'+c(typeof(o=null!=(o=m(a,"popularity")||(null!=n?m(n,"popularity"):n))?o:s)===d?o.call(r,{name:"popularity",hash:{},data:l,loc:{start:{line:12,column:67},end:{line:12,column:81}}}):o)+'</span>\r\n            </p>\r\n            <p class="modal-info-title-original card-text">\r\n                Original Title<span class="modal-info-title-original-data">'+c(typeof(o=null!=(o=m(a,"original_title")||(null!=n?m(n,"original_title"):n))?o:s)===d?o.call(r,{name:"original_title",hash:{},data:l,loc:{start:{line:15,column:75},end:{line:15,column:93}}}):o)+'</span>\r\n            </p>\r\n            <div class="modal-info-genres">\r\n                <p class="modal-info-genres-text card-text">\r\n                    Genre\r\n                </p>\r\n                <p class="modal-info-genres-text-list">'+(null!=(i=m(a,"each").call(r,null!=n?m(n,"genres"):n,{name:"each",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:21,column:55},end:{line:23,column:29}}}))?i:"")+'                </p>\r\n            </div>\r\n            <h3 class="modal-info-about">About</h3>\r\n            <p class="modal-info-description">\r\n                '+c(typeof(o=null!=(o=m(a,"overview")||(null!=n?m(n,"overview"):n))?o:s)===d?o.call(r,{name:"overview",hash:{},data:l,loc:{start:{line:28,column:16},end:{line:28,column:28}}}):o)+'\r\n            </p>\r\n            <div class="modal-info-buttons-list">\r\n                <button type="button" class="modal-info-buttons-list-item is-active-btn" id="js-watched-button">Add to\r\n                    watched</button>\r\n                <button type="button" class="modal-info-buttons-list-item" id="js-queue-button">Add to queue</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},useData:!0})},QfWi:function(e,n,a){"use strict";a.r(n);a("0HMw"),a("IlJM"),a("8cZI"),a("lmye"),a("WB5j"),a("D/wG"),a("JBxO"),a("FdtR");var t={ulListMovie:document.querySelector(".list-movie-search-js"),liFilmsGalleryItem:document.querySelector(".films-gallery-item"),headerSearchWarningShow:function(){return document.querySelector("#header-search-warning-show")}},l=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];a("lYjL"),a("IvQZ"),a("Muwe"),a("4NM0"),a("aZFp");var i={homeHeader:'<div class=" header home-header header-container">\n  <div class="header-nav-container">\n    <a href="" class="header-logo logo link header-logo-js">\n    <span class="header-logo-img"></span>\n    <span class="header-logo-txt">Filmoteka</span></a>\n  \n<nav class="header-navigation">\n  <ul class="header-navigation-list">\n    <li class="header-navigation-list-item"><a href=""\n        class="navigation-list-item-link link navigation-list-item-link-home current">HOME</a></li>\n    <li class="header-navigation-list-item"><a href=""\n        class="navigation-list-item-link link navigation-list-item-link-my-library">MY LIBRARY</a>\n    </li>\n    <li class="header-navigation-list-item"><a href=""\n        class="navigation-list-item-link link navigation-list-item-link-join-us">join us</a>\n    </li>\n  </ul>\n</nav></div>\n  <form action="" class="header-search-form" id="search-form">\n    <input type="text" name="query" class="header-search-form-input" placeholder="Поиск фильмов">\n    <button class="header-search-form-btn" type="submit"></button>\n  </form>\n  <p id="header-search-warning-show">Search result not successful. Enter the correct movie name and</p>\n</div>',myLibraryHeader:'<div class=" header my-library-header header-container">\n  <div class="header-nav-container">\n    <a href="" class="header-logo logo link header-logo-js">\n      <span class="header-logo-img"></span>\n      <span class="header-logo-txt">Filmoteka</span></a>\n  <nav class="header-navigation">\n    <ul class="header-navigation-list">\n      <li class="header-navigation-list-item"><a href=""\n          class="navigation-list-item-link link navigation-list-item-link-home">HOME</a></li>\n      <li class="header-navigation-list-item"><a href=""\n          class="navigation-list-item-link link navigation-list-item-link-my-library current">MY LIBRARY</a>\n      </li>\n  \n    </ul>\n  </nav>\n  </div>\n  <ul class="header-button-list">\n    <li class="header-button-item"><button class="header-button header-button-watched is-active-btn">watched</button></li>\n    <li class="header-button-item"><button class="header-button header-button-queue">queue</button></li>\n  </ul>\n  \n</div>',modalHeader:'<div class="header modal-header header-container">\n  <div class="header-nav-container">\n    <a href="" class="header-logo logo link header-logo-js">\n      <span class="header-logo-img"></span>\n      <span class="header-logo-txt">Filmoteka</span></a>\n    <nav class="header-navigation">\n      <ul class="header-navigation-list">\n        <li class="header-navigation-list-item"><a href="" class="navigation-list-item-link link navigation-list-item-link-home">HOME</a></li>\n        <li class="header-navigation-list-item"><a href="" class="navigation-list-item-link link navigation-list-item-link-my-library">MY LIBRARY</a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n</div>'},o={filmsGalleryId:document.querySelector("#films-gallery"),header:document.querySelector(".header-container-js"),logo:document.querySelector(".header-logo-js"),homeLink:document.querySelector(".navigation-list-item-link-home")},r="https://api.themoviedb.org/3",s="ffddee44025dd24685ea61d637d56d24";function d(){fetch(r+"/trending/movie/day?api_key="+s).then((function(e){return e.json()})).then((function(e){var n=e.results;fetch(r+"/genre/movie/list?api_key="+s).then((function(e){return e.json()})).then((function(e){var a=e.genres;!function(e,n){e.map((function(e){var a=e.id,t=e.poster_path,l=e.title,i=e.release_date,r=e.genre_ids,s=n.filter((function(e){return r.includes(e.id)})).map((function(e){return e.name})),d='\n  <li class="films-gallery-item" data-id="'+a+'">\n    <img\n      class="films-gallery-item-image"\n      src="https://image.tmdb.org/t/p/w342'+t+'"\n      alt="«'+l+'» film poster"\n    >\n    <p class="films-gallery-item-title films-gallery-item-description">'+l.toUpperCase()+'</p>\n    <p class="films-gallery-item-info films-gallery-item-description">'+s.slice(0,3).join(", ")+" | "+i.split("-")[0]+"</p>    \n  </li>\n  ";o.filmsGalleryId.insertAdjacentHTML("beforeend",d)}))}(n,a)}))}))}!function(e){!function(e){o.header.insertAdjacentHTML("beforeend",e)}(e),d()}(i.homeHeader),document.querySelector(".header-search-form").addEventListener("submit",(function(e){var n=document.querySelector(".films-gallery-item"),a=document.querySelector(".list-movie-search-js");n&&(a.innerHTML=""),e.preventDefault(),function(e){fetch("https://api.themoviedb.org/3/search/movie?api_key=ffddee44025dd24685ea61d637d56d24&language=en-US&query="+e+"&page=1&include_adult=false").then((function(e){return e.json()})).then((function(e){!function(e){0===e.results.length?(console.log(t.headerSearchWarningShow()),t.headerSearchWarningShow().classList.add("header-search-warning-show")):t.headerSearchWarningShow().classList.remove("header-search-warning-show")}(e),n(e)}));var n=function(e){e.results.map((function(e){var n=[];if(e.genre_ids.map((function(e){var a=l.find((function(n){return n.id===e}));n.push(a.name)})),n.length>=3){var a=n.slice(0,2);a.push("Other"),e.genre_ids=a.join(", "),e.release_date=e.release_date.slice(0,4)}else e.genre_ids=n.join(", "),e.release_date&&(e.release_date=e.release_date.slice(0,4));!function(e){t.ulListMovie.insertAdjacentHTML("beforeend",'\n        <li class="films-gallery-item" data-id="'+e.id+'">\n        <img class="films-gallery-item-image" src="https://image.tmdb.org/t/p/original'+e.poster_path+'" alt="'+e.original_title+'" width="150px"/>\n        <p class="films-gallery-item-title films-gallery-item-description">'+e.original_title+'</p> \n        <p class="films-gallery-item-info films-gallery-item-description">'+e.genre_ids+" | "+e.release_date+"</p>\n        </li>\n      ")}(e)}))}}(e.target[0].value),e.target[0].value="",console.log("Вывожу фильмы по запросу",e.target[0].value),document.querySelector("#films-gallery").innerHTML=""}));var c=a("O8px"),m=a.n(c);a("9va6");var u=[];var h=0;function p(){console.log("closeMovieDetails"),t.modalCard.remove()}function g(e){console.log("onPresEsc"),"Escape"===e.code&&(p(),window.removeEventListener("keydown",g))}function v(e){switch(t.modalDetailedCard=document.querySelector(".modal"),t.modalInfo=document.querySelector(".modal-info"),t.modalGenreInfo=document.querySelector(".modal-info-genres"),e.target.parentNode){case t.modalGenreInfo:case t.modalInfo:case t.modalDetailedCard:p(),t.modalCard.removeEventListener("click",v);break;default:return}}t.filmsGallery=document.querySelector(".films-gallery-container"),t.body=document.querySelector("body"),t.filmsGallery.addEventListener("click",(function(e){if("LI"!==e.target.parentNode.nodeName)return;h=e.target.parentNode.dataset.id,function(e,n,a){return fetch(""+e+a+"?api_key="+n+"&language=en-US").then((function(e){return e.json()})).catch((function(e){throw e}))}("https://api.themoviedb.org/3/movie/","ffddee44025dd24685ea61d637d56d24",h).then((function(e){var n={id:e.id,poster_path:e.poster_path,title:e.title,vote_average:e.vote_average,vote_count:e.vote_count,popularity:e.popularity,original_title:e.original_title,overview:e.overview,genres:e.genres.slice(0,3)},a=m()(n),l='<div class="modal-backdrop">\n    '+i.modalHeader+"\n    "+a+'\n    <footer class="footer">\n      <div class="block">\n        <p class="text">&#169; 2020 | All Rights Reserved |</p>\n        <div class="mob-container">\n          <p class="develop-text">Developed with</p>\n          <span class="footer-heart-svg heart-svg"></span>\n          <a class="open-modal-develop" href="#">by GoIT Students</a>\n        </div>\n      </div>\n    </footer>\n    </div>';t.body.insertAdjacentHTML("beforeend",l),window.addEventListener("keydown",g),t.modalCard=document.querySelector(".modal-backdrop"),t.modalCard.addEventListener("click",v),t.addToWatchedBtn=document.querySelector("#js-watched-button"),t.addToWatchedBtn.addEventListener("click",(function(e){var a,t,l;a=n,t=[],l=localStorage.getItem("localWatched"),(t=l?JSON.parse(l):[]).map((function(e){if(e.id===a.id)return console.log("already added")})),t.push(a),console.log(t),localStorage.setItem("localWatched",JSON.stringify(t))})),t.addToQueueBtn=document.querySelector("#js-queue-button"),t.addToQueueBtn.addEventListener("click",(function(e){var a,t;a=n,t=localStorage.getItem("userQueue"),(u=t?JSON.parse(t):[]).map((function(e){if(e.id===a.id)return console.log("already added")})),u.push(a),console.log(u),localStorage.setItem("userQueue",JSON.stringify(u))}))})).catch((function(e){return console.log(e)}))}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.1328ede2fd0dfa0381dd.js.map